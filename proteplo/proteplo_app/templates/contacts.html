{% extends 'header.html' %}
{% block title %} Контакты{% endblock %}
{% load static %}
{% block link %}
<link rel="stylesheet" type="text/css" href="{% static 'style/contacts.css' %}">
<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=828b126c-0067-466a-a2e2-47b4ffa39121" type="text/javascript"></script>
<script type="text/javascript">
    function init() {

        var latitude = {{ latitude }};
        var longitude = {{ longitude }};

        var myMap = new ymaps.Map("map", {
            center: [latitude, longitude],
            zoom: 15
        });

        var myPlacemark = new ymaps.Placemark([latitude, longitude], {
            balloonContent: 'г. Витебск, пр. Фрунзе, 15'
        });

        myMap.geoObjects.add(myPlacemark);
    }
    ymaps.ready(init);
</script>
{% endblock %}
{% block content %}
<div class="buy-call" id="buy-call">
    <div class="block-call" id="block-call">
        <form method="post">
            {% csrf_token %}
            <div class="block-call-title">
                <span>Заказать звонок</span>
            </div>
            <div class="input-block">
                <input type="text" id="name" name="name" placeholder="Ваше имя" required style="margin-top: 51px;"/>
                <input type="tel" id="number" name="number" placeholder="Номер телефона" required style="margin-top: 21px;"/>
                <div class="block-call-text" style="margin-top: 21px;">
                    <span>Удобное время для звонка</span>
                    <div class="clock">
                        <input type="number" id="hour" name="hour" value="12" min="0" max="23" oninput="validateInput()" onblur="addLeadingZero()" required />
                        <span>:</span>
                        <input type="number" id="minute" name="minute" value="00" min="0" max="59" oninput="validateInput()" onblur="addLeadingZero()" required />
                    </div>
                </div> 
                <input type="text" id="comment" name="comment" placeholder="Комментарий (необязательно)" required style="margin-top: 21px;"/>        
            </div> 
            <button type="submit" class="button-1" id="call">
                <span class="text">Отправить</span>
            </button>
        </form>
    </div>
</div>
<div class="contacts-block">
    <div class="title">
        <span>Свяжитесь с нами</span>
    </div>
    <div class="contacts-text">
        <span>Мы всегда готовы ответить 
            на ваши вопросы, предоставить 
            консультацию и помочь с выбором 
            оптимального решения для вашего дома или офиса.
        </span>
    </div>
    <div class="contacts-info">
        <div style="display: block;">
            <div class="contacts-info-block">
                <div class="number">
                    <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18.8752 14.1042V17.7876C18.8752 18.3345 18.4524 18.7882 17.907 18.8268C17.4514 18.859 17.0797 18.875 16.7919 18.875C7.58712 18.875 0.125244 11.4131 0.125244 2.20833C0.125244 1.92053 0.141338 1.54882 0.173525 1.09323C0.212088 0.547792 0.665807 0.125 1.2126 0.125H4.89618C5.16356 0.125 5.38749 0.327521 5.41434 0.593542C5.43844 0.832365 5.46085 1.0241 5.48157 1.16877C5.69228 2.64033 6.12267 4.041 6.73847 5.33649C6.83732 5.54443 6.77286 5.79332 6.5855 5.92715L4.33728 7.53312C5.70599 10.7303 8.26993 13.2943 11.4671 14.663L13.0701 12.4186C13.2057 12.2291 13.4575 12.1639 13.668 12.2638C14.9634 12.8791 16.3639 13.309 17.8352 13.5192C17.979 13.5398 18.1695 13.562 18.4067 13.5859C18.6727 13.6128 18.8752 13.8368 18.8752 14.1042Z" fill="#E84332"/>
                    </svg>                    
                    <span class="question-text">+375 (00) 000-00-00</span>                      
                </div>
                <div class="email">
                    <svg width="21" height="19" viewBox="0 0 21 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1.12492 0.125H19.8749C20.4502 0.125 20.9166 0.591375 20.9166 1.16667V17.8333C20.9166 18.4086 20.4502 18.875 19.8749 18.875H1.12492C0.549627 18.875 0.083252 18.4086 0.083252 17.8333V1.16667C0.083252 0.591375 0.549627 0.125 1.12492 0.125ZM10.563 9.16969L3.88244 3.4976L2.53406 5.08573L10.5761 11.9136L18.4733 5.07933L17.1099 3.504L10.563 9.16969Z" fill="#E84332"/>
                    </svg>              
                    <span class="question-text">email@gmail.com</span>                     
                </div>
                <div class="address">
                    <svg width="19" height="23" viewBox="0 0 19 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16.129 16.0882L9.49985 22.7172L2.87072 16.0882C-0.790444 12.4269 -0.790444 6.49103 2.87072 2.82986C6.53189 -0.831307 12.4678 -0.831307 16.129 2.82986C19.7902 6.49103 19.7902 12.4269 16.129 16.0882ZM9.49985 11.5423C10.6505 11.5423 11.5832 10.6096 11.5832 9.45899C11.5832 8.30839 10.6505 7.37565 9.49985 7.37565C8.34922 7.37565 7.41651 8.30839 7.41651 9.45899C7.41651 10.6096 8.34922 11.5423 9.49985 11.5423Z" fill="#E84332"/>
                    </svg>                     
                    <span class="question-text">г. Витебск, пр. Фрунзе, 15<br><span style="margin-left: 27px;">Пн-Пт 8.00-22.00</span></span>                     
                </div>           
            </div>
            <div class="button-1" id="call">
                <span class="text">Заказать звонок</span>
            </div>
        </div>
        <div class="map" id="map"></div>
    </div>
</div>
<script>
    document.getElementsByClassName('button-1')[1].addEventListener('click', function() {
        document.getElementById('buy-call').style.opacity = 1;
        document.getElementById('buy-call').style.pointerEvents = 'all';
    });

    let flag = true;

    document.getElementById('block-call').addEventListener("mouseout", function() {
        flag = true;
    });
    document.getElementById('block-call').addEventListener("mouseover", function() {
        flag = false;
    });
    
    document.getElementById('buy-call').addEventListener('click', function() {
        if (flag == true) {
            document.getElementById('buy-call').style.opacity = 0;
            document.getElementById('buy-call').style.pointerEvents = 'none';
        }     
    });

    document.getElementById('number').addEventListener('input', function (e) {
        let x = e.target.value.replace(/\D/g, '').match(/(\d{1,3})(\d{1,2})?(\d{1,3})?(\d{1,2})?(\d{1,2})?/);
        x[1] = 375;
        e.target.value = !x[2] ? '+' + x[1] : '+' + x[1] + ' (' + x[2] + (x[3] ? ') ' + x[3] : '') + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : '');
    });

    function validateInput() {
        let inputHour = document.getElementById('hour');
        let valueHour = parseInt(inputHour.value, 10);
        let inputMinute = document.getElementById('minute');
        let valueMinute = parseInt(inputMinute.value, 10);

        if (isNaN(valueHour)) {
            inputHour.value = '00';
        } else if (valueHour < 0) {
            inputHour.value = '00';
        } else if (valueHour > 23) {
            inputHour.value = '23';
        }

        if (isNaN(valueMinute)) {
            inputMinute.value = '00';
        } else if (valueMinute < 0) {
            inputMinute.value = '00';
        } else if (valueMinute > 59) {
            inputMinute.value = '59';
        }
    }

    function addLeadingZero() {
        let inputHour = document.getElementById('hour');
        let valueHour = parseInt(inputHour.value, 10);
        let inputMinute = document.getElementById('minute');
        let valueMinute = parseInt(inputMinute.value, 10);

        if (!isNaN(valueHour) && valueHour < 10) {
            inputHour.value = '0' + valueHour;
        }
        else if (!isNaN(valueHour) && valueHour >= 10) {
            inputHour.value = valueHour;
        }

        if (!isNaN(valueMinute) && valueMinute < 10) {
            inputMinute.value = '0' + valueMinute;
        }
        else if (!isNaN(valueMinute) && valueMinute >= 10) {
            inputMinute.value = valueMinute;
        }
    }
</script>
{% endblock %}